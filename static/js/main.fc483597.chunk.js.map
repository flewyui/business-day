{"version":3,"sources":["index.tsx"],"names":["App","currentYear","String","Date","getFullYear","currentMonth","getMonth","startDate","endDate","holidayObjects","holiday_jp","useState","numbersOfDays","setNumbersOfDays","allHolidays","setAllHolidays","holidaysOfMonth","setHolidaysOfMonth","businessDays","setBusinessDays","selectedYear","setSelectedYear","selectedMonth","setSelectedMonth","getBusinessdays","ym","targetYear","Number","slice","targetMonthStr","replace","targetMonth","newBusinessdaysArr","newHolidaysArr","i","formatedDate","date","year","month","day","getDate","dayOfWeekStr","getDay","formatDate","isWeekend","match","checkIsWeekend","isHoliday","map","holiday","checkIsHoliday","push","name","useEffect","console","log","lastDate","forEach","week","week_en","name_en","formatedHolidayObj","makeHolidaysArr","className","sx","minWidth","size","id","labelId","value","label","onChange","e","target","length","key","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fc483597.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport * as holiday_jp from '@holiday-jp/holiday_jp';\nimport Box from '@mui/material/Box';\nimport InputLabel from '@mui/material/InputLabel';\nimport FormControl from '@mui/material/FormControl';\nimport Select from '@mui/material/Select';\nimport MenuItem from '@mui/material/MenuItem';\nimport './style.css';\n\nconst App: React.VFC = () => {\n    type HolidayObj = {\n        date: Date;\n        name: string;\n        name_en: string;\n        week: string;\n        week_en: string;\n    };\n    type FormatedHolidayObj = {\n        date: string;\n        name: string;\n    };\n    const currentYear = String(new Date().getFullYear()); // 現在の年\n    const currentMonth = String(new Date().getMonth() + 1); // 現在の月\n    const startDate = new Date('2021-01-01'); // 検索可能初日\n    const endDate = new Date('2023-12-31'); // 検索可能最終日\n    const holidayObjects = holiday_jp.between(startDate, endDate); // 対象期間の休日オブジェクト\n    const [numbersOfDays, setNumbersOfDays] = useState<number[]>([]); // 対象年の各月の日数\n    const [allHolidays, setAllHolidays] = useState<FormatedHolidayObj[]>([]); // 対象年の祝日のリスト\n    const [daysOfMonth, setDaysOfMonth] = useState<Date[]>([]); // 対象月の全日のリスト\n    const [holidaysOfMonth, setHolidaysOfMonth] = useState<string[]>([]); // 対象月の祝日のリスト\n    const [businessDays, setBusinessDays] = useState<string[]>([]); // 対象月の営業日のリスト\n    const [selectedYear, setSelectedYear] = useState<string>(currentYear); // 選択された年\n    const [selectedMonth, setSelectedMonth] = useState<string>(currentMonth); // 選択された月\n\n    /**\n     * 「年/月/日(曜日)」にフォーマット\n     * @param {Date} date\n     * @returns {string} formatedDate フォーマットされた日付\n     */\n    const formatDate = (date: Date) => {\n        const year = date.getFullYear();\n        const month = date.getMonth() + 1;\n        const day = date.getDate();\n        const dayOfWeek = date.getDay();\n        const dayOfWeekStr = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'][\n            dayOfWeek\n        ];\n        const formatedDate = `${year}/${month}/${day}(${dayOfWeekStr})`;\n        return formatedDate;\n    };\n\n    /**\n     * 対象日が休日かどうか判定\n     * @param {string} date - 対象日\n     * @returns {boolean} isHoliday 休日かどうかの真偽値\n     */\n    const checkIsHoliday = (date: string): boolean => {\n        let isHoliday = false;\n        allHolidays.map((holiday) => {\n            if (holiday.date === date) isHoliday = true;\n        });\n        return isHoliday;\n    };\n\n    /**\n     * 対象日が土日のどちらかかどうか判定\n     * @param {string} date - 対象日\n     * @returns {boolean} isWeekend 土日のどちらかどうかの真偽値\n     */\n    const checkIsWeekend = (date: string): boolean => {\n        let isWeekend = false;\n        if (date.match(/Sat/) || date.match(/Sun/)) isWeekend = true;\n        return isWeekend;\n    };\n\n    /**\n     * 「年/月/日/(曜日)：休日名」にフォーマットしてallHolidays:[]にセット\n     * @param holidayObjects\n     */\n    const makeHolidaysArr = (holidayObjects: HolidayObj[]) => {\n        holidayObjects.forEach((holiday) => {\n            const year = holiday.date.getFullYear();\n            const month = holiday.date.getMonth() + 1;\n            const day = holiday.date.getDate();\n            const week = holiday.week_en.slice(0, 3);\n            const name = holiday.name_en;\n            const formatedHolidayDate = `${year}/${month}/${day}(${week})`;\n            const formatedHolidayObj: FormatedHolidayObj = {\n                date: formatedHolidayDate,\n                name: name,\n            };\n            setAllHolidays((allHolidays) => [\n                ...allHolidays,\n                formatedHolidayObj,\n            ]);\n        });\n    };\n\n    /**\n     * 対象月の営業日を取得\n     * @param {string} ym\n     */\n    const getBusinessdays = (ym: string) => {\n        const targetYear = Number(ym.slice(0, 4));\n        let targetMonthStr = ym.slice(4, 6);\n        if (targetMonthStr.slice(0, 1) === '0')\n            targetMonthStr = targetMonthStr.replace('0', '');\n        const targetMonth = Number(targetMonthStr);\n        const newBusinessdaysArr: string[] = [];\n        const newHolidaysArr: string[] = [];\n        for (let i = 1; i <= numbersOfDays[targetMonth - 1]; i++) {\n            const date: Date = new Date(targetYear, targetMonth - 1, i);\n            let formatedDate = formatDate(date);\n            const isWeekend = checkIsWeekend(formatedDate);\n            const isHoliday = checkIsHoliday(formatedDate);\n            // 休日はnewHolidaysArr:[]に追加し、ループ終了後setState()\n            if (isHoliday) {\n                allHolidays.map((holiday) => {\n                    if (holiday.date === formatedDate) {\n                        formatedDate = formatedDate.slice(5);\n                        newHolidaysArr.push(`${formatedDate}：${holiday.name}`);\n                    }\n                });\n            }\n            // 平日はnewBusinessdaysArr:[]に追加し、ループ終了後setState()\n            if (!isWeekend && !isHoliday) newBusinessdaysArr.push(formatedDate);\n        }\n        setHolidaysOfMonth(newHolidaysArr);\n        setBusinessDays(newBusinessdaysArr);\n    };\n\n    useEffect(() => {\n        console.log(holidayObjects);\n\n        for (let i = 1; i < 13; i++) {\n            const lastDate = new Date(Number(selectedYear), i, 0).getDate();\n            setNumbersOfDays((numbersOfDays) => [...numbersOfDays, lastDate]);\n        }\n        makeHolidaysArr(holidayObjects);\n    }, []);\n\n    /**\n     * 各月の日数が取得できたら実行\n     */\n    useEffect(() => {\n        getBusinessdays(`${selectedYear}${selectedMonth}`);\n    }, [numbersOfDays, selectedYear, selectedMonth]);\n\n    return (\n        <>\n            <div className='wrapper'>\n                <Box sx={{ minWidth: 350 }}>\n                    <FormControl sx={{ minWidth: 175 }} size='small'>\n                        <InputLabel id='demo-select-small'>Year</InputLabel>\n                        <Select\n                            labelId='demo-select-small'\n                            id='demo-select-small'\n                            value={selectedYear}\n                            label='Year'\n                            onChange={(e) => {\n                                setSelectedYear(e.target.value);\n                            }}\n                        >\n                            <MenuItem value='2021'>2021</MenuItem>\n                            <MenuItem value='2022'>2022</MenuItem>\n                            <MenuItem value='2023'>2023</MenuItem>\n                        </Select>\n                    </FormControl>\n                    <FormControl sx={{ minWidth: 175 }} size='small'>\n                        <InputLabel id='demo-select-small'>Month</InputLabel>\n                        <Select\n                            labelId='demo-select-small'\n                            id='demo-select-small'\n                            value={selectedMonth}\n                            label='Month'\n                            onChange={(e) => {\n                                setSelectedMonth(e.target.value);\n                            }}\n                        >\n                            <MenuItem value='1'>1</MenuItem>\n                            <MenuItem value='2'>2</MenuItem>\n                            <MenuItem value='3'>3</MenuItem>\n                            <MenuItem value='4'>4</MenuItem>\n                            <MenuItem value='5'>5</MenuItem>\n                            <MenuItem value='6'>6</MenuItem>\n                            <MenuItem value='7'>7</MenuItem>\n                            <MenuItem value='8'>8</MenuItem>\n                            <MenuItem value='9'>9</MenuItem>\n                            <MenuItem value='10'>10</MenuItem>\n                            <MenuItem value='11'>11</MenuItem>\n                            <MenuItem value='12'>12</MenuItem>\n                        </Select>\n                    </FormControl>\n                </Box>\n                <div className='container h-50'>\n                    <h5 className='item-130'>Business days : </h5>\n                    <h5 className='item-270 text-center'>\n                        {businessDays.length} days\n                    </h5>\n                </div>\n                <div className='container h-50'>\n                    <h5 className='item-130'>Working hours : </h5>\n                    <h5 className='item-270 text-center'>\n                        {7.5 * businessDays.length} h\n                    </h5>\n                </div>\n                {holidaysOfMonth.length ? (\n                    holidaysOfMonth.map((holiday, key) => {\n                        return (\n                            <div className='container h-30' key={key}>\n                                <h5 className='item-95'>\n                                    {key === 0 && 'Holidays : '}{' '}\n                                </h5>\n                                <h5 className='item-305 text-center'>\n                                    {holiday}\n                                </h5>\n                            </div>\n                        );\n                    })\n                ) : (\n                    <div className='container h-30'>\n                        <h5 className='item-130'>Holidays : </h5>\n                        <h5 className='item-270 text-center'>No holiday...</h5>\n                    </div>\n                )}\n            </div>\n        </>\n    );\n};\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}